---
layout: layouts/base.njk
section: home
mainClasses: content
---

<section class="content--full homescreen u-displayFlex u-flex--stretch" aria-label="Chris Kirk-Nielsen: creative developer, in a heavily eighties-inspired graphical style with neon colours, a perspective grid, and a big sun in the background">
	<div class="homescreen__wrapper u-displayFlex u-flex--centre u-posRelative u-afterCover u-width--100">
        <div class="homescreen__background u-absCover u-overflowHidden u-beforeCover u-afterCover" aria-hidden="true">
            {% set ckn_grid -%}
            {%- include "assets/img/home-grid.svg" -%}
            {%- endset -%}
            {{ ckn_grid | htmlmin | safe }}
            {# <div class="homescreen__scene u-absCover u-beforeCover u-afterCover" aria-hidden="true"></div> #}
        </div>

        <div class="homescreen__svg-wrapper u-posRelative">
            {% set ckn_mark -%}
            {%- include "assets/img/home-mark.njk" -%}
            {%- endset -%}
            {{ ckn_mark | htmlmin | safe }}
        </div>
        
        <script type="text/javascript">
        {% set scene_script %}
            // Register the sun's mask lines to animate them
            if (window.CSS.registerProperty) {
                window.CSS.registerProperty({
                    name: '--ckn-sun-mask-lines',
                    syntax: '<length-percentage>',
                    inherits: true,
                    initialValue: '0',
                });
            }
        {% endset %}
        {{ scene_script | jsmin | safe }}
        </script>
    </div>
</section>

<section class="u-flow">
    {{ layoutContent | safe }}

    {% set latestpost = collections["posts_" + locale] | reverse | first %}
    {% if latestpost %}
        {# <h2>{{ localisedContent.latestPost }}</h2> #}

        <article {% if latestpost.url == url %} data-current="current item"{% endif %}>
            <h3>
                <a href="{{ latestpost.url | url }}">
                    {% if latestpost.data.title %}
                        {{ latestpost.data.title }}
                    {% else %}
                        Untitled Post
                    {% endif %}
                </a>
            </h3>

            <p class="u-marginBlockStart--half">
                <time class="u-c--primary-med u-fontBold" datetime="{{ latestpost.date | machineDate }}">{{ latestpost.date | date(dateFormat, locale) }}{{ punctSp }}:</time>

                {% if latestpost.data.summary %}
                    {{ latestpost.data.summary }}
                {% else %}
                    {{ latestpost.excerpt }}
                {% endif %}
            </p>
		</article>
    {% endif %}
</section>
