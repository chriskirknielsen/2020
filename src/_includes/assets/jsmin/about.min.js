"use strict";var utilityButtonLink="u-displayInlineFlex u-flex--centerBlock u-paddingInline--half u-fontBold u-c--grey-min u-bg--grey-max h_u-c--grey-min h_u-bg--grey-max u-border u-border--grey-med h_u-border--accent u-border-radius h_u-glowBox--accent h_u-textShadow--currentBg";window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},document.addEventListener("DOMContentLoaded",function(){var e="data-about-action",t=document.querySelectorAll("["+e+"]");if(t){for(var a=0;a<t.length;a++)if(!t[a].closest("svg")){var n=t[a].innerHTML,o=t[a].getAttribute(e),r='<button class="button--reset '+utilityButtonLink+'" '+e+'="'+o+'">'+n+"</button>";t[a].outerHTML=r}(t=[].slice.call(document.querySelectorAll("["+e+"]"))).forEach(function(t){"hooked-delorean"===t.getAttribute(e)&&t.addEventListener("click",function(){document.querySelector(".about__delorean").classList.toggle("about__delorean--with-hook")},!1),"synth"===t.getAttribute(e)&&t.addEventListener("click",function(e){e.preventDefault();var t=document.querySelector('[data-grid-el="trinket-keyboard"]');return t.classList.toggle("about__keyboard--open"),t.classList.contains("about__keyboard--open")&&t.focus(),!1},!1),"synth-set-type"===t.getAttribute(e)&&t.addEventListener("click",function(e){return e.preventDefault(),document.querySelector('[data-synth-type][aria-pressed="true"]').setAttribute("aria-pressed","false"),console.log(t),t.setAttribute("aria-pressed","true"),!1},!1)})}}),document.addEventListener("keyup",function(e){"Escape"===e.key&&document.querySelector('[data-grid-el="trinket-keyboard"]').classList.toggle("about__keyboard--open")});var audioContext=new(window.AudioContext||window.webkitAudioContext),octaveOffset=1;function getHz(){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:4,t=0;switch(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"A"){default:case"A":t=0;break;case"A#":case"Bb":t=1;break;case"B":t=2;break;case"C":t=3;break;case"C#":case"Db":t=4;break;case"D":t=5;break;case"D#":case"Eb":t=6;break;case"E":t=7;break;case"F":t=8;break;case"F#":case"Gb":t=9;break;case"G":t=10;break;case"G#":case"Ab":t=11}return t+=12*(e-4),440*Math.pow(2,t/12)}function playKey(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"triangle",a=audioContext.createOscillator(),n=audioContext.createGain();n.connect(audioContext.destination);n.gain.value=1e-5;n.gain.exponentialRampToValueAtTime(.5,audioContext.currentTime+.01),n.gain.exponentialRampToValueAtTime(.001,audioContext.currentTime+1),n.gain.exponentialRampToValueAtTime(1e-5,audioContext.currentTime+2),a.connect(n),a.type=t;var o=getHz(e.note,(e.octave||0)+octaveOffset);Number.isFinite(o)&&(a.frequency.value=o),e.element.classList.add("pressed"),pressedNotes.set(e,a),pressedNotes.get(e).start()}function stopKey(e){if(e){e.element.classList.remove("pressed");var t=pressedNotes.get(e);t&&(setTimeout(function(){t.stop()},2e3),pressedNotes.delete(e))}}var pressedNotes=new Map,clickedKey="";document.addEventListener("click",function(e){if(e.target.closest("[data-note]"))return e.preventDefault(),!1},!1),document.addEventListener("mousedown",function(e){var t=e.target.closest("[data-note]");if(t){e.preventDefault();var a={element:t,note:t.getAttribute("data-note"),octave:parseInt(t.getAttribute("data-octave"),10)},n=document.querySelector('[data-synth-type][aria-pressed="true"]').getAttribute("data-synth-type");return playKey(clickedKey=a,n),!1}},!1),document.addEventListener("mouseup",function(){stopKey(clickedKey)},!1);