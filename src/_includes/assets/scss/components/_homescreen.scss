.homescreen {
    min-height: calc(100vh - #{ $header-expected-height } - #{ $base-line-height * 2em }); // Take up the whole screen, minus menu and minus two lines of text

    &__wrapper {
        $outline-size: .5rem;
        $arrow-size: 1rem;

        &::before {
            content: '';
            position: absolute;
            z-index: 1;
            top: 100%;
            left: 0;
            right: 0;
            width: 0;
            height: 0;
            margin: 0 auto;
            border-style: solid;
            border-color: var(--c-primary-med) transparent transparent;
            border-width: #{ $arrow-size } #{ $arrow-size } 0;
            pointer-events: none;
        }

        &::after {
            border: #{ $outline-size } solid var(--c-primary-med);
            pointer-events: none;
        }
    }

    &__background {
        $sun-radius: 20vmin;
        $sun-blind-size: $sun-radius / 12;
        $sky-start: #0a0634;
        $sky-end: #791e74;
        $sun-top: #ed23af;
        $sun-middle: #ffafa3;
        $sun-bottom: #ffffe9;
        $sun-ref-top: #9d3472;
        $sun-ref-bottom: #3c0328;
        $sun-glow: $sun-top;

        $sun-fallback: radial-gradient(circle at 50% 100%,
                #{ $sun-bottom } 0,
                #{ $sun-middle } #{ $sun-radius / 2 },
                #{ $sun-top } #{ $sun-radius },
                #{ rgba($sun-glow, .5) } #{ $sun-radius },
                transparent #{ $sun-radius * 1.0625 }
            ) no-repeat 50% 0 / 100% 50%;

        $sun-mask-disk: radial-gradient(circle at 50% 50%,
                red #{ $sun-radius * 0.999 },
                transparent #{ $sun-radius * 1.001 }
            ) no-repeat 50% 50%;
        $sun-mask-lines: repeating-linear-gradient(
                red var(--ckn-sun-mask-lines),
                red calc( var(--ckn-sun-mask-lines) + #{ $sun-blind-size } ),
                transparent calc( var(--ckn-sun-mask-lines) + #{ $sun-blind-size } ),
                transparent calc( var(--ckn-sun-mask-lines) + #{ $sun-blind-size * 2 } )
            ) repeat-x 50% 100% / 100% 50%;

        $sun-gradient:
            // radial-gradient(circle at 50% 100%,
            //     #{ rgba($sun-glow, 0) } #{ $sun-radius * .75 },
            //     #{ rgba($sun-glow, .5) } #{ $sun-radius }
            // ) no-repeat 50% 0 / 100% 50%,
            
            linear-gradient(180deg,
                #{ $sun-top } 0,
                #{ $sun-middle } 30%,
                #{ $sun-bottom } 50%,
                #{ $sun-ref-top } 50%,
                #{ $sun-ref-bottom } 100%
            ) no-repeat 50% 50% / 100% #{ $sun-radius * 2 };
        $sun-glow-gradient:
            radial-gradient(circle at 50% 100%,
                #{ rgba($sun-glow, 0) } #{ $sun-radius * .875 },
                gradient-stops($sc: $sun-glow, $sa: 0, $ec: $sun-glow, $ea: .5, $sp: $sun-radius * .875, $ep: $sun-radius, $s: 6, $xb: true, $ease: 'in'),
                #{ rgba($sun-glow, .75) } #{ $sun-radius },
                gradient-stops($sc: $sun-glow, $sa: .75, $ec: $sun-glow, $ea: 0, $sp: $sun-radius, $ep: $sun-radius * 1.375, $s: 8, $xb: true, $ease: 'out'),
                #{ rgba($sun-glow, 0) } #{ $sun-radius * 1.25 }
            ) no-repeat 50% 0 / 100% 50%;

        /* Sky layer */
        background:
            // Horizon glow
            radial-gradient(ellipse 150% 20% at 50% 100%,
                gradient-stops($sc: $sun-glow, $sa: .75, $ec: $sun-glow, $ea: 0, $sp: 0%, $ep: 50%, $s: 12),
            ) no-repeat 50% 0 / 100% 50%,

            // Full sky
            linear-gradient(
                #{ $sky-start } 0%,
                #{ $sky-end } 50%,
                #{ c('primary', 'max') } 50%,
                #{ c('grey', 'max') } 100%
            );
        background-color: c('primary', 'max') !important; // Hardcode since we don't want this to be affected by colour schemes

        /* Sun layer */
        &::before {
            background: #{ $sun-fallback };
        }

        @supports (mask-image: linear-gradient(0deg,red,red)) or (-webkit-mask-image: linear-gradient(0deg,red,red)) {
            &::before {
                background: #{ $sun-gradient };
                -webkit-mask: #{ $sun-mask-disk }, #{ $sun-mask-lines };
                -webkit-mask-composite: source-out;
                        mask: #{ $sun-mask-disk } subtract, #{ $sun-mask-lines };
            }

            &::after {
                background: #{ $sun-glow-gradient };
            }
        }

        /* Animating the sun's blinds */
        --ckn-sun-mask-lines: #{ $sun-blind-size * 0 }; // Set the default to 50% for browser who don't support animatable custom properties
        animation: sunMaskLines 1s linear infinite;
        @keyframes sunMaskLines {
            0% { --ckn-sun-mask-lines: #{ $sun-blind-size * -1 }; }
            100% { --ckn-sun-mask-lines: #{ $sun-blind-size }; }
        }

    }

    &__svg-wrapper {
        > svg {
            width: 60rem;
        }
    }
}
